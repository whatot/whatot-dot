if [[ -d "/usr/share/oh-my-zsh/" ]];then
    ZSH=/usr/share/oh-my-zsh/
    DISABLE_AUTO_UPDATE="true"
else
    ZSH=~/.oh-my-zsh/
    DISABLE_AUTO_UPDATE="false"
fi

case `uname` in
    Darwin)
        ZSH_THEME="robbyrussell"
        source ~/.zshenv
        alias vim='mvim -v'
    ;;
    Linux)
        ZSH_THEME="gentoo"
        export GTK_IM_MODULE=fcitx
        export QT_IM_MODULE=fcitx
        export XMODIFIERS="@im=fcitx"
        alias gvim='gvim -c "call Maximize_Window()"'
        alias unzipp='unzip -O cp936'
    ;;
esac

plugins=(git colorize cargo common-aliases kubectl stack)

alias mvalidate="mvn validate -U"
alias mcc='mvn clean compile -U -Dmaven.test.skip=true'
alias mdeploy='mvn clean deploy -Dmaven.test.skip=true'
alias mtree='mvn clean dependency:tree -U'
alias msource='mvn dependency:sources'
alias mtt='mvn clean test -U'

unset GREP_OPTIONS
export MESA_GL_VERSION_OVERRIDE=2.1
export XDG_CONFIG_HOME="$HOME/.config/"
export LC_MESSAGES="en_US.UTF-8"
export EDITOR='vim'

ZSH_CACHE_DIR=$HOME/.oh-my-zsh-cache
if [[ ! -d $ZSH_CACHE_DIR ]]; then
    mkdir $ZSH_CACHE_DIR
fi

PY_ENV_WRAPPER=/usr/bin/virtualenvwrapper.sh
if [[ -f $PY_ENV_WRAPPER ]]; then
    source $PY_ENV_WRAPPER
    export WORKON_HOME="$HOME/envs/"
fi

SCCACHE_WRAPPER="$HOME/.cargo/bin/sccache"
if [[ -f $SCCACHE_WRAPPER ]]; then
    export RUSTC_WRAPPER="${SCCACHE_WRAPPER}"
fi

source $ZSH/oh-my-zsh.sh
